syntax = "proto3";

package banditpylib;


// Next tag 2
message SequentialContext {
  repeated float value = 1;
}

// Next tag 2
message Vector {
  repeated float value = 1;
}

// Next tag: 2
message VectorizedContext {
  repeated Vector vectors = 1;
}

// Next tag: 3
message Context {
  oneof context_type {
    SequentialContext sequential_context = 1;
    VectorizedContext vectorized_context = 2;
  }
}

// Next tag: 3
message Arm {
  // Next tag 2
  message Set {
    repeated int32 id = 1;
  }

  oneof arm_type {
    // The arm id is an integer
    int32 id = 1;
    // The arm id is a set
    Set set = 2;
  }
}

// Next tag: 3
message ArmPull {
  // Arm to be pulled
  Arm arm = 1;
  // Number of times to pull
  int32 times = 2;
}

// Next tag: 2
message Actions {
  repeated ArmPull arm_pulls = 1;
}

// Next tag: 4
message ArmFeedback {
  // Arm pulled
  Arm arm = 1;
  // Rewards obtained
  repeated float rewards = 2;
  // This field is specific to MNL bandit. When this field is 0, it means the
  // customer does not buy any product. Otherwise (>0), it means the customer
  // purchases some product.
  repeated int32 customer_feedbacks = 3;
}

// Next tag: 2
message Feedback {
  repeated ArmFeedback arm_feedbacks = 1;
}

// Next tag: 5
message Result {
  // Total communication rounds
  int32 rounds = 1;
  // Total actions performed by the learner
  int32 total_actions = 2;
  // Learner's regret i.e., the difference between the optimal policy and the
  // one generated by the learner
  float regret = 3;
  // This is a placeholder used to record other information
  float other = 4;
}

// Next tag: 4
// This message stores the results generated within one trial
message Trial {
  // Bandit name
  string bandit = 1;
  // Learner name
  string learner = 2;
  repeated Result results  = 3;
}
